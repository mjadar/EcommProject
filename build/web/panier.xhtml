<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
       xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>Panier : </title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
         <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"/>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
        <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
        <style>
            body {
                margin-top: 20px;
            }
        </style>
    </h:head>
    <h:body>
        <center>
                <div class="container">
                        <div class="row">
                                <div class="col-xs-8">
                                        <div class="panel panel-info">
                                                <div class="panel-heading">
                                                        <div class="panel-title">
                                                                <div class="row">
                                                                        <div class="col-xs-6">
                                                                                <h5><span class="glyphicon glyphicon-shopping-cart"></span> PANIER : </h5>
                                                                        </div>
                                                                        <div class="col-xs-6">
                                                                            <h:form>
                                                                                <h:commandButton class="btn btn-primary btn-sm btn-block" value="Continuer vos achats" action="index.xhtml"/>
                                                                            </h:form>
                                                                        </div>
                                                                </div>
                                                        </div>
                                                </div>
                                                <div class="panel-body">
                                                    <ui:repeat var="o" value="#{panierBean.produits_panier}" varStatus="status">
                                                            <div class="row">
                                                                    <h:form> 
                                                                        <div class="col-xs-2"><img class="img-responsive" src="#{o.image}"/>
                                                                        </div>
                                                                        <div class="col-xs-4">
                                                                            <h4 class="product-name"><strong>#{o.libelle}</strong></h4>
                                                                        </div>
                                                                        <div class="col-xs-6">
                                                                                <div class="col-xs-6 text-right">
                                                                                    <h6><strong>#{o.prix} <span class="text-muted">x</span></strong></h6>
                                                                                </div>
                                                                                <div class="col-xs-4">
                                                                                        <h:commandButton class="btn btn-danger" value="-" action="#{panierBean.decrease(o.id_prod)}"/>
                                                                                        <input type="number" class="form-control input-sm" value="#{o.qte_comm}" min="1" max="#{o.qte}"  />
                                                                                        <h:commandButton class="btn btn-success" value="+" action="#{panierBean.increase(o.id_prod)}"/>
                                                                                </div>
                                                                        </div>
                                                                    </h:form>
                                                            </div>
                                                        <hr></hr>
                                                    </ui:repeat>


                                                </div>
                                                <div class="panel-footer">
                                                        <div class="row text-center">
                                                                <div class="col-xs-9">
                                                                        <h4 class="text-right">Total Ã  payer : <strong> #{panierBean.total} </strong></h4>
                                                                </div>
                                                                <div class="col-xs-3">
                                                                              <h:form >  
                                                                                    <c:choose>
                                                                                        <c:when test="#{loginBean.isLogged}">
                                                                                            <h:commandButton class="btn btn-success btn-block" value="Confirmer la commande" action="#{panierBean.confirmerPanier(loginBean.email_login)}"/>
                                                                                        </c:when>
                                                                                        <c:otherwise>
                                                                                            <h:commandButton class="btn btn-success btn-block" value="Confirmer la commande" action="login.xhtml"/>
                                                                                        </c:otherwise>
                                                                                   </c:choose>
                                                                                 </h:form>   
                                                                </div>
                                                        </div>
                                                </div>
                                        </div>
                                </div>
                        </div>
                </div>
            
            </center>
    </h:body>
</html>
